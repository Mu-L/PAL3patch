【今天是腊月二十三】
唐雪见生日快乐哈哈哈

【与内存修改器不兼容的原因】
内存修改器是通过检查窗口标题来判断游戏是否运行的
由于补丁修改了窗口标题，所以修改器判断游戏没有运行
只要把窗口标题改回PAL3--SOFTSTAR.sh即可。

【使用PIX运行游戏时，游戏运行缓慢的原因】
关掉补丁中的“减少输入延迟”即可。

【某些情况下贴图会变成纯色的原因和解决方案：forcesettexture】
通过DebugThisPixel功能可以知道，对应的DrawIndexedPrimitive之前程序没有设置纹理
但是若调到对应的Draw函数调用，向前翻一些到之前的Draw调用，可以看到是设置了贴图的，而且贴图是一致的
并且之间有StateBlock的Capture和Apply，怀疑是由于D3DX的效果框架使用StateBlock保存/恢复状态的导致贴图状态丢失
通过查看GBENGINE的代码，gbGfxManager_D3D::SetTexture函数内，只在原有贴图（之前内部状态保存的）和新贴图（调用参数），才会更新贴图。
由于StateBlock干扰了D3D的绘制状态，导致D3D的实际状态与GBENGING内部保存的状态出现不一致
GBENGING以为D3D的贴图还是原来的没变，但是实际上已经被StateBlock给Apply掉了
解决方案：
直接把GBENGINE判断贴图是否一致的代码NOP掉，强行每次都更新贴图

【战斗界面怪物显示不出来的原因】
根本原因都是Alpha通道为0（全透明），所以显示不出来。但是导致Alpha为0有两种类型不同的原因：
(1)第一种原因是和“贴图变为纯色”的原因一样，由于贴图丢失，顶点Diffuse的Alpha分量0代替了应有的Alpha分量，所以显示不出来
这种类型是怪物显示不出现这个现象“随机出现”的原因，也是最常见的怪物显示不出来的原因
这样的错误在强制每次都更新贴图之后消失
(2)第二种原因是因为怪物贴图的Alpha通道全部为0造成的，从着色器上无法区分这一点
这种类型的“显示不出来”是可以重现的，不会有任何的“随机”成分。
可能需要在贴图加载时特殊判断贴图是否为全透明，并把它改为全不透明（但我担心会导致其他问题）。

【PAL3cpkunpack：解压缩 CPK 的工具】
编译后把PAL3cpkunpack.exe和cpkunpack.bat放到游戏目录下
直接运行cpkunpack.bat即可解压缩全部 CPK 到正确位置（适合于免CPK补丁）

