===== GAME BUG =====
有时“重新来过”后，直接去“山洞初体验”会导致bug。（可能是游戏本身问题）
在同一段对话（例如新安当花楹支线）中，若出现两次时间棒，无论第二次选什么，都会重复第一次的输入（可能游戏本身问题）
在战斗中连续按F键，之后按F键会可能会不起作用（可能游戏本身问题）
跳跃提示符状态在退出游戏时没有清理（或者在进入游戏时没有重置），导致在“开始新游戏”或“滑雪”时一直显示该提示符（游戏本身问题）
FIXED: 大地图中城市图标对于鼠标是否移上去的判定不准（可能是取Alpha值时上下搞反了，可能是游戏本身问题）


===== PATCH BUG =====
FIXED: 战斗胜利后，有一个鼠标位置没有修正好（猜测可能与GetCursorPos有关）
FIXED: 播放动画时，若LostDevice，则会导致之后的画面播放不出来
窗口化后，偶尔鼠标点击无效，切出再切回后恢复
FIXED: 窗口化后，在播放动画时捕获鼠标，此时按Alt+Tab鼠标仍然被截取
FIXED: 某些机器上播放动画时鼠标会闪烁，也许和消息循环有关？（已确认与WM_SETCURSOR有关）
FIXED: 关闭模板缓存后，由于播放动画时Clear()带有清除模板缓存的调用，导致无效调用，动画播放不出来
FIXED: GBENGINE根本没用到模板缓存，应该取消模板缓存的选项
FIXED: 注册表重定向不会自动创建save目录，所以在没有save目录的情况下会崩溃
FIXED: 更换2x贴图后，有些人物会变黑
FIXED: 在MBA Win7系统上，在游戏过程中按电源键休眠会导致程序Reset()错误
FIXED: 全屏幕切出后，在任务管理器中对游戏窗口（不是进程）结束任务，游戏并不会完全退出，还会在播放音乐（因为自己写的消息循环没处理WM_QUIT）
FIXED: 系统界面中，平行投影的东西都错位，大小也不对
FIXED: “五灵站位”位置虽然没错，但是大小却不会根据uiratio改变
FIXED: 主系统“队列”页面中“五灵站位”与“UI操作”鼠标位置虚拟化冲突问题（详见notes20160925.txt）
FIXED: 字体大小有上限，需要想办法解决，虽然最大大小在1080p下勉强够用（已可以更换系统字体）
FIXED: 窗口化可能导致垂直同步失效
FIXED: 更换字体后，战斗对话渐变效果错误，可能与颜色的Alpha通道有关
更换2x贴图后，冰风谷刚遇邪剑仙时，或者在剑冢遇到邪剑仙时，邪剑仙的动作贴图显示异常
FIXED: 与“仙剑3内存修改器”不兼容
FIXED: 普通3D游戏界面UI元素位置大小修正；住宿时点击客栈老板，弹出来的窗口与“买卖”、“当铺经营”的窗口模式不同，不能虚拟化，需要手工处理
FIXED: 在某些特定地点、特殊视角下，有些贴图会变成纯色，例如刚进剑冢时门的贴图、永安当仓库窗户的贴图（可能游戏本身问题），也许可以通过PIX的debug this pixel功能来调试
FIXED: 战斗界面天空盒子贴图有时也会变成纯色，例如璧山第一个酒坛妖怪
WONTFIX: 在新安当丁时彦处投资当铺，弹出窗口中标题处“当铺等级”的值显示有微小错位
FIXED: “动态模糊”相关功能
FIXED: 进入系统界面（如买卖等），背景拉伸（压缩）问题
FIXED: 系统界面背景在设备丢失后会消失或变成乱码
FIXED: launcher无法在某些系统中使用，因为API的地址发生了变化，需要动态获取
FIXED: 战斗界面gbPrintFont_NUM类显示的文字位置仍然错误，需要对CCBDisplayChain类、CCBSystem类（次要）进行逆向
FIXED: 战斗界面中各个操作窗口UI鼠标位置问题
FIXED: 战斗对话框位置大小不正确
FIXED: 敌人增益/减益图标位置大小不正确
FIXED: 代码注释中缺少TR_SCALE_系列的说明
FIXED: 紫萱、雪见武器拖影问题（使用相对计时器）
FIXED: 软件光标模式下，鼠标大小会受到fixui state的影响
FIXED: 创建ID3DXFont时需要预加载字体，否则可能会导致显示文字时有卡顿感
FIXED: 窗口化分辨率设为1900x1000时，战斗画面字体medium大小，会出现找不到对应大小的情况
FIXED: 开启垂直同步后，鼠标输入的延迟会增加（可以通过战斗胜利时鼠标火花特效滞后看出）
FIXED: 当使用原游戏字体字体替换时，文字会错位
FIXED: 系统界面周围需要遮挡（例如主菜单两边，大地图两边）
FIXED: 剧情诗词大小和位置不正确
FIXED: 剧情对话框大小和位置不正确
帧率问题（详见note20161209.txt）：当帧率不为60时会有一系列问题；最好请求60fps帧率
FIXED: 减少输入延迟时，用StretchRect和LockRect的方法在touch memory被编译器优化掉了（或许可以仿照alloca写汇编，或者根本不需要touch memory）（暂时删去touch memory操作）
FIXED: 小游戏UI修正（包括那些只能通过剧情触发而不能通过游戏主菜单进入的）
FIXED: 屏幕比例不是4:3时，司南转动时会变形
FIXED: UI贴图很多情况下位置不准，会造成UI贴图看起来发虚
FIXED: UI很多都是D3DTEXF_POINT，放大质量不佳
FIXED: 游戏场景中人物表情图标（例如红心、心碎、汗等）位置和大小不正常（UIEmote）
FIXED: 游戏欢迎界面太极打开效果错位
FIXED: 游戏场景中可跳跃图标位置和大小不正常
FIXED: 当限制游戏帧率小于30时可能会导致动画播放画面卡住（但是音频正常）
FIXED: 播放动画时，CPU全部被占满
FIXED: 战斗中选择敌人时，有时敌人会显示不出来（例如璧山酒坛子）
FIXED: 刚进剑冢时，若被剑碰到会掉血，效果为人物红色闪烁，此时掉血提示文字位置不正确
部分贴图Alpha通道为全部为全透明，导致一些问题（如剑冢九州散人后出现怪物，在战斗选择是消失）
FIXED: 使用线性纹理过滤器会导致拼接两纹理时出现缝隙（即使纹理坐标精确、顶点位置精确，也会出现问题）
FIXED: 场景矩形的放大因数（SF_SCENEUIRECT）这个东西很不合理，与整个UI变换框架十分不协调
FIXED: 播放动画时使用到了边长为非2整数次幂的纹理，可能在某些不支持该功能的计算机上出现问题
FIXED: 窗口化后，加载时间较长时，如果在加载期间点击窗口，则会导致窗口“无响应”，接下来DirectInput无法Acquire导致游戏退出
FIXED: gbResManager::FindResByName根据CRC32哈希判断，有较大概率会有“生日攻击”的问题。
FIXED: 过程动画播放有略微黑边，需要调整纹理寻址并clamp（已增加clampmovie选项）
FIXED: 修正acquire的过程中可能导致程序一直无响应（win7，启动时弹出窗口后切到其他程序，等待标题栏变色后切回，就会无响应；可能需要处理消息循环）


===== TODO =====
DONE: 根据播放剧情动画的内容，自动切掉动画的黑边（注意字幕问题）
DONE: 绕过CPK直接使用文件系统，可以使用config_flags &= ~2解决
DONE: 在全屏模式下也可以使用“关闭窗口”退出
DONE: 关闭窗口时提示存档保存问题
DONE: 允许不输入密码就直接调出游戏内置控制台
DONE: 日志截断（防止大量warning持续写硬盘）
DONE: 能让用户选择特定游戏状态是否对4:3比例留白，而不是只有一个统一的选项uiborder
DONE: 静态链接D3DX9_21
DONE: 统计FPS抖动
DONE: 允许配置抖动显示阈值
DONE: 允许自定义窗口比例（提供除4:3留白和全屏不留白之外的自定义选项），新增customrectN
DONE: 允许使用MSVC编译
DONE: 构建通用的纹理替换框架
DONE: 很有可能出现用到GBENGINE.DLL中的地址却忘记加gboffset的情况。可以通过将gbengine重定位(rebase)到0x40000000然后在memcpy_to_process系列函数中判断来测试，需要枚举选项。（也许有更好方法）
DONE: 处理“窗口化”与“分辨率”搭配问题（“有边框”不宜选“当前分辨率”，“无边框”宜选“当前分辨率”）
DONE: 添加配音接口
DONE: 在语音插件中添加不同类型配音的总开关
有可能出现不同补丁重复修改同一个内存位置而造成错误的情况，需要在底层检测
繁体默认字体
繁体翻译
默认/初次设置向导（专家系统）
切出时暂停音乐播放
增强ZPK功能（例如根据原文件名/原哈希找文件），并且允许同时打开多个ZPK
建立通用的gbVFileSystem的HOOK框架
ABANDONED: 用矩阵乘法和齐次坐标重写变换框架（需要考虑UIWnd的tag问题）
ABANDONED: 允许交叉编译
重写launcher的shellcode（比较字符串时不使用ESP，防止对齐问题；或直接重写）
兼容触屏
仅限制逻辑帧率，这样就算不开垂直同步/或者显示器刷新率极高的情况下，游戏也能正常工作
限制FPS帧率时，下一个时间点取当前时间较好，还是取上一个时间点+间隔较好？
更换截屏方式（不要用GetFrontBufferData，用StretchRect到RenderTarget上）
使用Direct3D9Ex接口（没有D3DPOOL_MANAGED了）
ABANDONED: 添加多屏幕支持（例如三屏幕，在不同屏幕之间使用不同的透视投影矩阵）
ABANDONED: 添加VR支持
ABANDONED: 用AlphaBlend代替AlphaTest获得更好的透明效果

